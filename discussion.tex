\section{Discussion, Lessons and Limitations}
\label{sec:discussion}

\begin{table}
  \centering
  \begin{tabular}{l|cccccc}
    & V./F. & C. & D. & M.L. & R. & A. \\
    \hline
RCloud     &       x            &       x       &     x      &      x        &           x        &           x         \\
RStudio    &                    &               &            &               &           x        &           x         \\
JSFiddle   &       x            &       x       &            &               &                    &                     \\
bl.ocks    &       x            &       x       &            &               &           x        &                     \\
shiny      &                    &               &     x      &               &           x        &           x         \\
Jupyter    &                    &               &            &      x        &           x        &           x         \\
Tableau    &                    &      x        &     x      &               &           x        &                     \\
ManyEyes   &                    &      x        &     x      &               &                    &                     
  \end{tabular}
  \caption{Comparison of system features. Columns: Versioning/Forking, Collaboration, Deployment, Multi-language support, Integrated Reports, and Integrated Analysis.}
\end{table}
% SN says Tableau: versioning=no  collaboration=yes  deployment=yes multilanguage=no  reports=yes  analysis=no

\subsection{Reflection on Design Considerations}

Experience with deploying RCloud in a community of data analysts
(``hackers'') gave us some insight into whether the proposed
requirements were appropriate, and were met.

Our experience underscored the relevance of Heer and Agrawala's design
considerations, and indicated areas for further exploration. We adopt
their taxonomy in the following discussion.

\paragraph*{Shared artifacts and artifact histories} are a central feature
of RCloud, through shared workbooks. We observed that hackers readily
share experiments, demonstrate techniques, publish results to peers and
managers, and transfer algorithms to other groups. Artifact histories
can be accessed through the notebook tree or through GitHub's web interface.
But a probem is that it is easy to create a large number of artifacts
and the system does not help enough to organize and navigate them.

\paragraph*{Modularity and granularity} Modularity, or the ability
to partition work into independent units, is a key to working
productively in teams.
It is a benefit if the units can be kept small or granular, so team members
can realize benefits at least proportional to the work on the units.
RCloud's notebook and versioning capabilities allow work to be divided
into units as fine as the underlying language allows, and versioning
encourages making incremental changes at low cost and without disrupting
the work of others.

\paragraph*{View sharing, bookmarking} Most resources in RCloud are named
and accessed as URLs. This proved to be effective for sharing analyses
and integrating them with external processes.  It is particularly
advantageous for work to be shared as URLs that provide access to code
and experiments, instead of by pasting screenshots into reports.

\paragraph*{Discussion} Annotation and commenting was another central goal.
Commenting is supported through GitHub, but our hackers found it
awkward and did not exercise it as much as we expected.
An interesting question is, to what extent should application users
be able to make annotations in published notebooks without coding
and being exposed to the hackers's view? The design of
more elaborate, integrated annotation remains as future work.

\paragraph*{Content export} is not a capability we aimed at supporting,
and R already has many packages for this. Recently, due to popular
demand, we added user interface support for exporting plot images.
We assume that RCloud notebooks should play well in the ecosystem
of other tools, but sometimes it is difficult to know whether adding
a feature for compatibility will offload complexity, or increase it.

\paragraph*{Social-psychological incentives} and {\bf voting and ranking} are
supported through starring and forking. These mechanisms are employed often
on the platform. An obvious next step would be to enhance recommendations
using relationships discovered by static and dynamic code analysis. This
may be considered both within and across collections of scripts (the latter
being similar to VisTrails' enhanced recommendations by clustering multiple
workflows).  It seems valuable to know which packages are frequently used
together, or appear in proximity to a certain record types or data feeds.
In general, trivial or passive mechanisms to collect data for
recommendations are essential.

\paragraph*{Group management, size and diversity} This area needs better
support in RCloud, but is clearly important to working in teams.
We rely on external administrative processes and social conventions
to manage accounts and groups. RCloud could benefit greatly from
integrating social media to track identities and groups and to maintain
communication channels, instead of having its own isolated solution.

\paragraph*{Curation} Even without formal group management, users may
curate groups of related notebooks using notebook tree folders.
We found this particularly effective in collecting and distributing
training materials.

\subsection{Limitations}
Because we developed our ideas while simultaneously creating a prototype,
we did not foresee some of the requirements that emerged after
people started working with RCloud.

\paragraph*{Versioning and Upgrading}
Some important aspects of the environment are more difficult to manage
in RCloud than in conventional systems. RCloud does not separate the
development and deployment environments, and every version of every
prototype is shared by default. Although this encourages
collaboration, it also quickly exposes errors such as
misconfiguration, mismatches between versions of packages, and
programming errors that can unintentionally affect production
websites. For example, if the RCloud website is distributed across
servers in different machines, different versions of system software
can cause errors that are hard to find and fix.

Versioning of different software pieces must be managed in several
levels: in data analysis and visualization scripts (that is, the
notebooks themselves); in the R environment such as the installed
libraries and packages; and in the external environment such as the
operating system, libraries, and protocols spoken by remote
services. At one end of the scale, we have full control over the
versions via git, along with conventions that fix stable notebook
versions.  The R environment itself is under the control of its
package manager that has rules to ensure reasonable consistency.  It
is at least possible for RCloud to access information about package
versions and configurations, but support for checking compatibility
and maintaining multiple versions in the same environment is not
strong.  At the other end of the scale, there is not much reason to
expect version control for the external environment, and consider what
would happend if a web service that is used by a notebook changes the
format of its output: notebooks now stop working, but nothing in
RCloud has changed.

%Asynchronous collaborative visual analytics
%(ACVA)~\cite{Chen:2011:SEC}. This paper addresses visualization
%\emph{of} the ACVA process. It will be important when we talk about
%recommendation systems, and navigation of the set of notebooks, etc.

\paragraph*{Caching}
An important consideration is how and where to introduce caching in
RCloud's distributed computation model. Caching can dramatically
improve performance in a way that is otherwise transparent to
application program semantics \cite{Callahan:2006:VVM, Guo:2010:TPI}.
Currently, RCloud offers no support for implicit caching, but since it
supports the entirety of the R language, it's possible to incorporate
caching in R libraries.  Still, since the reuse of intermediate
results is a recurring problem in data exploration environments, it
seems better to implement this capability in a general purpose
associative cache. We envision cache management being implemented in a
new middle layer to be added in the future.

\paragraph*{Security}
Because RCloud allows arbitrary R code to be run
\emph{by design}, it's not straightforward to protect deployments
from running unauthorized arbitrary code. RCloud uses an object capability model
\cite{Miller:2006:RCT} recently added to the Rserve
protocol~\cite{Urbanek:2003:AFW}. Object capabilities are opaque handles
to remote procedure calls; this way, web browsers never directly instruct the
RCloud backend to execute arbitrary code, preventing unauthenticated clients
from making unauthorized calls to the RCloud runtime environment.
%
Our back-end environment, on the other hand, assumes a high degree of trust between users:
access control for information security is delegated to the host
operating system and web server. In practice, operating
systems rely either on coarse permission models,
which tend to be ineffective, or on detailed access control
lists, which tend to be cumbersome. This means that information security
in RCloud is a delicate, unsolved matter. More
sophisticated approaches, such as information flow analysis,
and query languages that ensure differential privacy, are
still research topics~\cite{Moore:2011:SAF}.
% We are hopeful that having a richer
% environment for collaboration and information sharing will encourage
% new approaches to information security in visual analytics.
%\gordon{This sounds like we think we are helping by pushing the
%system to the breaking point, is that the idea?}

\paragraph*{Nonforgetful, effortless exploration is hard}
Users reported that RCloud's combined notebook and command line
interface interferes with their familiar use of R for exploration.  In
current R practice, the command prompt is used to try things out.  It
is very fast and there is often no commitment: nothing gets saved by
default, but clean up is automatic.  In contrast, in RCloud's
notebook interface, cells generated doing exploration are saved in the
notebook.  We arrived here from an insistence on reproducibility: it is a
core principle of RCloud that no command should be run without being
saved. In our experience some history steps are only found to be
important in hindsight, and deleting history by default makes it too
easy to lose those steps by accident.

Surprisingly, we found that when users realize that \emph{scratch work
  is getting saved}, the extra versions become a mental burden for
them. Clearly, RCloud has now moved too far to the other side, and the
right solution is somewhere in the middle. An intriguing possibility,
suggested by one of our interviewees, is to implement auditing of data
analyses as it existed in S~\cite{Becker:1988:Auditing}, tying the
data artifacts to the processes that generated them. As a result, the
bookkeeping is reduced to selecting the \emph{data} to be kept, and
the code which generates it can be derived and saved transparently.

%% . This is why we did not implement a simple command line
%% as many users request. We could imagine making an exception for commands
%% that have no side-effects, but in the general case this is no easier than
%% auditing because R is not a purely functional language.

%% The interface is also perceived to be slower, both for computer and for
%% human. First, there is higher latency when commands run, because
%% RCloud saves a cell to a repository before executing it. It
%% may be possible to safely write to the repository behind execution of the
%% same code. Second, and perhaps more detrimental, the interface requires
%% switching between the keyboard and mouse, which can be cumbersome.
%% %\gordon{we don't need to back that up, right? i hate using passive voice.}
%% Shortcut keys can defined as a workaround, but it would be better
%% to reduce the need for them.

%% Other complaints mostly focus on layout, and can probably be addressed by
%% offering better customization, and designs such as tabbed views.

\paragraph*{Discovery is hard} 
With hundreds of users and thousands of notebooks, the notebook tree
becomes unwieldy. The search function does not protect searchers from
obsolete and erroneous notebooks, which by default are retained
forever.  In addition, some important metadata (has this notebook been
recently run, or edited?) is also not easily searchable. In other words,
\emph{textual search} is easy, but \emph{relevance search} is what we
need. Allowing users to \emph{tag} notebooks is a natural idea, but it
relies on users making a conscious effort, which goes somewhat against
our ideal of not asking the user to do work for the system. Rather, we
believe a better alternative is to have the system work for the user,
relying on passive metrics, such as how often a notebook has been run.
More generally, infrastructure for automatic \emph{curation} of the
software artifacts generated by teams seems to be an important avenue
for future work.

\paragraph*{Collaboration is hard}
While forking provides a simple way to continue someone else's work,
teams working together generate workflows for which forking is not
ideal.  Although popular, forking poses a problem when dozens of
versions of a notebook proliferate. A fully general solution seems
intractable. Nevertheless, we expect future versions of the
notebook infrastructure to move toward git's ideal of decentralized
code repositories, instead of the exclusive ownership mode we
currently employ.
