\section{Discussion, Lessons and Limitations}
\label{sec:discussion}

\begin{table}
  \centering
  \begin{tabular}{l|cccccc}
    & V./F. & C. & D. & M.L. & R. & A. \\
    \hline
RCloud     &       x            &       x       &     x      &      x        &           x        &           x         \\
RStudio    &                    &               &            &               &           x        &           x         \\
JSFiddle   &       x            &       x       &            &               &                    &                     \\
bl.ocks    &       x            &       x       &            &               &           x        &                     \\
shiny      &                    &               &     x      &               &           x        &           x         \\
Jupyter    &                    &               &            &      x        &           x        &           x         \\
Tableau    &                    &      x        &     x      &               &           x        &                     \\
ManyEyes   &                    &      x        &     x      &               &                    &                     
  \end{tabular}
  \caption{Comparison of system features. Columns: Versioning/Forking, Collaboration, Deployment, Multi-language support, Integrated Reports, and Integrated Analysis.}
\end{table}
% SN says Tableau: versioning=no  collaboration=yes  deployment=yes multilanguage=no  reports=yes  analysis=no

\subsection{Reflection on Design Considerations}

Experience with deploying RCloud in a community of data analysts
(``hackers'') gave us some insight into whether the proposed
requirements were appropriate, and were met.

Our experience underscored the relevance of Heer and Agrawala's design
considerations, and indicated areas for further exploration. We adopt
their taxonomy in the following discussion.

\paragraph*{Shared artifacts and artifact histories} are a central feature
of RCloud, through shared workbooks. We observed that hackers readily
share experiments, demonstrate techniques, publish results to peers and
managers, and transfer algorithms to other groups. Artifact histories
can be accessed through the notebook tree or through GitHub's web interface.
But a probem is that it is easy to create a large number of artifacts
and the system does not help enough to organize and navigate them.

\paragraph*{Modularity and granularity} Modularity, or the ability
to partition work into independent units, is a key to working
productively in teams.
It is a benefit if the units can be kept small or granular, so team members
can realize benefits at least proportional to the work on the units.
RCloud's notebook and versioning capabilities allow work to be divided
into units as fine as the underlying language allows, and versioning
encourages making incremental changes at low cost and without disrupting
the work of others.

\paragraph*{View sharing, bookmarking} Most resources in RCloud are named
and accessed as URLs. This proved to be effective for sharing analyses
and integrating them with external processes.  It is particularly
advantageous for work to be shared as URLs that provide access to code
and experiments, instead of by pasting screenshots into reports.

\paragraph*{Discussion} Annotation and commenting was another central goal.
Commenting is supported through GitHub, but our hackers found it
awkward and did not exercise it as much as we expected.
An interesting question is, to what extent should application users
be able to make annotations in published notebooks without coding
and being exposed to the hackers's view? The design of
more elaborate, integrated annotation remains as future work.

\paragraph*{Content export} is not a capability we aimed at supporting,
and R already has many packages for this. Recently, due to popular
demand, we added user interface support for exporting plot images.
We assume that RCloud notebooks should play well in the ecosystem
of other tools, but sometimes it is difficult to know whether adding
a feature for compatibility will offload complexity, or increase it.

\paragraph*{Social-psychological incentives} and {\bf voting and ranking} are
supported through starring and forking. These mechanisms are employed often
on the platform. An obvious next step would be to enhance recommendations
using relationships discovered by static and dynamic code analysis. This
may be considered both within and across collections of scripts (the latter
being similar to VisTrails' enhanced recommendations by clustering multiple
workflows).  It seems valuable to know which packages are frequently used
together, or appear in proximity to a certain record types or data feeds.
In general, trivial or passive mechanisms to collect data for
recommendations are essential.

\paragraph*{Group management, size and diversity} This area needs better
support in RCloud, but is clearly important to working in teams.
We rely on external administrative processes and social conventions
to manage accounts and groups. RCloud could benefit greatly from
integrating social media to track identities and groups and to maintain
communication channels, instead of having its own isolated solution.

\paragraph*{Curation} Even without formal group management, users may
curate groups of related notebooks using notebook tree folders.
We found this particularly effective in collecting and distributing
training materials.

\subsection{Limitations}
Because we developed our ideas while simultaneously creating a prototype,
we did not foresee some of the requirements that emerged after
people started working with RCloud.

\paragraph*{Versioning}
Some important aspects of the environment are more difficult to manage
in RCloud than in conventional systems. RCloud does not explicitly
separate the development and deployment environments. More than that,
every version of every prototype is shared by default. Although this encourages
collaboration on work in progress it also quickly exposes errors such as
misconfiguration, mismatches between versions of packages, and programming
errors that can unintentionally affect production websites. Such errors
are difficult to completely avoid, but the power of convenient sharing is often
worth it (as proven true with distributed systems in general).
Still, effective control over versioning when sharing problem needs more
attention if RCloud would be scaled up to a wider number of users lacking
informal channels to coordinate work.

Versioning needs to be managed in several places: in scripts;
in the R environment such as the installed libraries and packages;
and in the external environment such as the operating system and
protocols spoken by remote services. At one end of the scale, we have
full control over the versioning of scripts via git, along with conventions
to name stable or working versions of scripts, and versions known to work together.
The R environment itself is under the control of its package manager
that has rules to ensure reasonable consistency.
It is at least possible for RCloud to access information about
package versions and configurations, but support for checking compatibility
and maintaining multiple versions in the same environment is not strong.
At the other end of the scale, there is not much reason to expect version
control for the external environment. Most programmers rely on clean living
and a careful approach to system upgrades.

On top of this, RCloud allows or even encourages hackers to fork experiments
to try new ideas quickly. So far we have not done much more to address the
problem of having a lot of bits and pieces of code and data lying around,
though we have provided a framework in which it should be easier to find them
and to apply algorithms and metadata to organize them.

%Asynchronous collaborative visual analytics
%(ACVA)~\cite{Chen:2011:SEC}. This paper addresses visualization
%\emph{of} the ACVA process. It will be important when we talk about
%recommendation systems, and navigation of the set of notebooks, etc.

\paragraph*{Caching}
An important consideration is how and where to introduce caching
in RCloud's distributed computation model. Caching can dramatically
improve performance in a way that is otherwise transparent to
application program semantics \cite{Callahan:2006:VVM, Guo:2010:TPI}.
Though caching is usually implicit, in some environments, such as
VisTrails, programmers may also have some explicit control over cache
management. This may be desirable to ensure the repeatability of
computations that rely on volatile or unreliable data sources.
For example, the stock ticker use case is one for which the data
might temporarily become unavailable, so caching could improve
reliability and consistency of results. Alternatively, in situations
involving relatively expensive computation (for example, analysis of large
text corpora, clustering multivariate time series or deep learning algorithms)
caching may be essential to adequate performance. Currently we would
program this in RCloud by explicitly saving an analysis in a persistent database,
but it seems better to implement this capability in a general purpose associative
cache, instead of application-specific libraries. We envision cache management
being implemented in a new middle layer to be added in the future.

\paragraph*{Security}
Security is an important concern in an environment for
collaboration and data publishing. To provide some
protection for RCloud workbooks in an organization's intranet,
RCloud uses an object capability model
\cite{Miller:2006:RCT}
recently added to the Rserve protocol \cite{Urbanek:2003:AFW}
that prevents unauthenticated clients from making
unauthorized calls to the RCloud runtime environment.

Our back-end environment assumes a high degree of trust between users.
Access control for information security is delegated to the host
operating system and web server. In practice, most operating
systems and web servers rely either on coarse permission models,
which tend to be ineffective, or on detailed access control
lists, which tend to be cumbersome.
Information security in RCloud should be improved. More
sophisticated approaches, such as information flow analysis,
and query languages that ensure differential privacy, are
active research topics, and many problems remain
\cite{Moore:2011:SAF}.
% We are hopeful that having a richer
% environment for collaboration and information sharing will encourage
% new approaches to information security in visual analytics.
%\gordon{This sounds like we think we are helping by pushing the
%system to the breaking point, is that the idea?}

\paragraph*{Exploration is hard}
% R is a popular language for exploratory data analysis, and we built RCloud
% as a way for data scientists to seamlessly transition from EDA to sharing
% and presentation.
Users reported that RCloud's combined notebook and command line interface
interferes with the familiar use of R for exploration.
In current R practice, the command prompt is used to try things out.
It is very fast and there is often no commitment: nothing gets saved
and there is nothing to clean up.
In contrast, in RCloud's notebook interface, the extra cells need
to be deleted later, and there seems to be a mental burden
that \emph{scratch work is getting saved}.

One thing to try is to make deletion easier, for example with a
shortcut key that removes the last cell, or a way to keep a few cells
and cull the rest. A far more ambitious solution, suggested by one of our
interviewees, is to implement auditing of data analyses as it existed in S
\cite{Becker:1988:Auditing}, so that a result could be selected and code
which did not lead to it could be discarded automatically. 

We got here from an insistence on reproducibility: it is a core principle
of RCloud that no command should be run without being saved, even if it
gets deleted later. This is why we did not implement a simple command line
as many users request. We could imagine making an exception for commands
that have no side-effects, but in the general case this is no easier than
auditing because R is not a purely functional language.

The interface is also perceived to be slower, both for computer and for
human. First, there is higher latency when commands run, because
RCloud saves a cell to a repository before executing it. It
may be possible to safely write to the repository behind execution of the
same code. Second, and perhaps more detrimental, the interface requires
switching between the keyboard and mouse, which can be cumbersome.
%\gordon{we don't need to back that up, right? i hate using passive voice.}
Shortcut keys can defined as a workaround, but it would be better
to reduce the need for them.

Other complaints mostly focus on layout, and can probably be addressed by
offering better customization, and designs such as tabbed views.

\paragraph*{Discovery is hard} 
With hundreds of users and thousands of notebooks, the notebook tree
becomes unwieldy. The search function does not protect searchers from
obsolete and erroneous notebooks, which by default are retained
forever.  It helps with finding notebooks, but not with finding other
types of metadata. In other words, \emph{textual search} is easy, but
\emph{relevance search} is what we need. Allowing users to \emph{tag}
notebooks is a natural idea, but it relies on users making a conscious
effort, This goes somewhat against our ideal of not asking the user to
do work for the system. Rather, we believe a better alternative is to
have the system work for the user, relying on passive metrics, such as
how often a notebook has been run.  More generally, infrastructure for
automatic \emph{curation} of the software artifacts generated by teams
seems to be an important avenue for future work.

\paragraph*{Collaboration is hard}
While forking provides a simple way to continue someone else's work,
teams working together generate workflows for which forking is not
ideal.  Although popular, forking poses a problem when dozens of
versions of a notebook proliferate. A fully general solution seems
intractable. Nevertheless, we expect future versions of the
notebook infrastructure to move toward git's ideal of decentralized
code repositories, instead of the exclusive ownership mode we
currently employ.
