\section{Discussion, Lessons and Limitations}
\label{sec:discussion}

\begin{table*}
  \centering
  \begin{tabular}{l|cccccc}
           & Versioning/Forking & Collaboration & Deployment & Multilanguage & Integrated Reports & Integrated Analysis \\
    \hline
RCloud     &       x            &       x       &     x      &      x        &           x        &           x         \\
RStudio    &                    &               &            &               &           x        &           x         \\
JSFiddle   &       x            &       x       &            &               &                    &                     \\
bl.ocks    &       x            &       x       &            &               &           x        &                     \\
shiny      &                    &               &     x      &               &           x        &           x         \\
Jupyter    &                    &               &            &      x        &           x        &           x         \\
Tableau    &                     &      x        &    x       &               &          x         &                     
  \end{tabular}
  \caption{Comparison of system features.}
\end{table*}
% SN says Tableau: versioning=no  collaboration=yes  deployment=yes multilanguage=no  reports=yes  analysis=no

\subsection{Reflection on Design Considerations}

Experience with deploying RCloud in a community of data analysts
(``hackers'') gave us some insight into whether the proposed
requirements are appropriate, and how well they were met.

Our experience underscored the relevance of Heer and Agrawala's design
considerations, and indicated areas for further exploration. We adopt
their taxonomy for the following discussion.

{\bf Shared artifacts and artifact histories} are a central feature of
RCloud, through its shared workbooks of experiments and analyses.  We
observed that hackers readily shared work through RCloud. They used it to
discuss ideas and results in data analysis, to ask for help with
programming problems, and to publish results by sharing URLs.  Artifact
histories can be accessed through the notebook tree or through GitHub's web
interface.

{\bf Modularity and granularity.} The ability to partition work into
independent units (modularity) is a key to working productively in teams.
It is good if the units can be kept small, so team members can realize
benefits at least proportional to the work on the units (granularity).
RCloud's notebook and versioning capabilities allow work to be divided
into units as fine as the underlying language allows, and versioning
encourages making incremental changes at low cost and without disrupting
the work of others. \gordon{But this design choice means that developing
larger, multi-page apps is less well supported.}

{\bf View sharing, bookmarking.} Most resources in RCloud are named
and accessed as URLs. This proved to be an effective mechanism for
sharing and for integrating analyses with external processes and systems.
It is particularly advantageous for work to be shared as URLs that
provide access to code and experiments, instead of by pasting static
screenshots into documents and presentations.

{\bf Discussion.} Annotation and commenting was another central goal.
Commenting is supported through github, but our hackers found it
awkward and did not exercise it as much as we expected.
An interesting question is, to what extent should application users
be able to make annotations in published notebooks without coding
and being exposed to the hackers's view? The design of
more elaborate, integrated annotation remains as future work.

{\bf Content export} is not a capability we aimed at supporting,
and R already has many packages for this. Instead, our goal was to
encourage ways of working without needing as much explicit export.
We did assume that RCloud notebooks should play well in the ecosystem
of other tools, and this worked as intended, though we learned it also
creates a temptation to absorb features almost without limit. (Should
RCloud provide templates for personal web pages and graphical
editing? Should it incorporate an email client and emacs?
Should it push results to Facebook?) Experience shows that interfaces
to external systems and other features almost always win over architectural
purity in the real world. \gordon{If you don't export, doesn't that mean
you have to support every possible operation downstream? Due to popular demand,
we did add plot export.}

{\bf Social-psychological incentives} and {\bf voting and ranking} are supported
through starring. This mechanism was employed often by our test
audience. \gordon{actually, the notebook tree quickly became so unwieldy that
no one uses this.} An obvious next step would be to enhance recommendations using
relationships discovered by static and dynamic code analysis. This may be
considered both within and across collections of scripts (the latter being
similar to VisTrails' enhanced recommendations by clustering multiple
workflows).  It seems valuable to know which packages are frequently used
together, or appear in proximity to a certain record types or data feeds.  In
general, trivial or passive mechanisms to collect data for recommendations are
essential.

{\bf Group management, size and diversity.} This area needs better
support in RCloud, but is clearly important to working in teams.
We rely on external administrative processes and social conventions
to manage accounts and groups. RCloud could benefit greatly from
integrating social media to track identities and groups and to maintain
communication channels, instead of having its own isolated solution.

{\bf Curation.} Even without formal group management, users may
curate groups of related notebooks using notebook tree folders.
We found this particularly effective in collecting and distributing
training materials.

\subsection{Limitations}
Because we developed our ideas while simultaneously creating a prototype,
we did not foresee some of the requirements that emerged after
people started working with RCloud.

{\bf Exploration is hard.}
R is a popular language for exploratory data analysis, and we built RCloud
as a way for data scientists to seamlessly transition from EDA to sharing
and presentation. But the interface we implemented for combining sharing and presentation
into the R command line interferes with the exploration aspect.

In existing R tools, the command prompt is used to try things out. It is very
fast and there is no commitment: nothing gets saved and there is nothing to
later clean up. In contrast, in RCloud's notebook interface, the extra cells need
to get deleted later, and there seems to be a mental burden that ``bad stuff
is getting saved.''

One thing to try here is making deletion easier, for example with a
shortcut key to remove the last cell, or a way to keep a few cells and cull
the rest. A far more ambitious solution, suggested by one of our
interviewees, is to implement auditing of data analyses as it existed in
S \cite{Becker:1988:Auditing}, so that the code which did not lead to a
result could be discarded automatically.

The interface is also perceived to be slower, both in terms of reaction
time---RCloud necessarily saves a cell to its repository before executing
it---and because it requires mouse interaction.

Other complaints mostly focus on layout and can probably be addressed with
some iteration and customization features.

{\bf Discovery is hard.}
While we have provided tools for searching and curating notebooks, the
search function does not help for finding methodology (and does not protect
searchers from erroneous notebooks), and the notebook tree starts to get
unwieldly with hundreds of users with hundreds of notebooks. In addition,
our choice to retain notebooks even when they have been deleted has
exacerbated the situation, since obsolete and broken notebooks stay around
forever.

One thing to try is tagging and filtering the tree on tags, so that users
can mark their own notebooks or those of others to make them easier to
find.

However, this relies on users making a conscious effort, and it may be
better to rely more on passive metrics such as how often a notebook has
been run.

The system also needs to help users curate their notebooks. If a notebook
has been superceded by one of its forks, a user who opens it should be
warned. If a notebook has been deleted, but someone still has a link to it,
it should be clear that the notebook is dead. And operations on multiple
notebooks and folders of notebooks should be supported to make curation
easier.


{\bf Collaboration is hard.}
While forking provides a simple way to continue someone else's work, working
in teams is a lot more complicated. The forking feature is popular but it
poses a problem, too, as dozens of versions of a notebook start proliferating.

One solution we are mulling over is to allow overwriting the current state
of a notebook with the current state of another fork of the notebook. More
general solutions would be serious engineering endeavors: even GitHub's web
interface does not support merging where there are any conflicts. Actual
sharing of notebooks would probably require moving toward git's notion of
decentralized code repositories, because GitHub gists do not support shared
ownership.



{\bf Versioning.}
Some important aspects of the environment are more difficult to manage
in RCloud than in conventional systems. RCloud does not explicitly
separate the development and deployment environments. More than that,
ever version of every prototype is shared by default. Although this encourages
collaboration on work in progress it also quickly exposes errors such as
misconfiguration, mismatches between versions of packages, and programming
errors that can unintentionally affect production websites. Such errors
are difficult to completely avoid, but the power of convenient sharing is often
worth it (as proven true with distributed systems in general).
Still, effective control over versioning when sharing problem needs more
attention if RCloud would be scaled up to a wider number of users lacking
informal channels to coordinate work.

Versioning needs to be managed in several places: in scripts;
in the R environment such as the installed libraries and packages;
and in the external environment such as the operating system and
protocols spoken by remote services. At one end of the scale, we have
full control over the versioning of scripts via git, along with conventions
to name stable or working versions of scripts, and versions known to work together.
The R environment itself is under the control of its package manager
that has rules to ensure reasonable consistency.
It is at least possible for RCloud to access information about
package versions and configurations, but support for checking compatibility
and maintaining multiple versions in the same environment is not strong.
At the other end of the scale, there is not much reason to expect version
control for the external environment. Most programmers rely on clean living
and a careful approach to system upgrades.

On top of this, RCloud allows or even encourages hackers to fork experiments
to try new ideas quickly. So far we have not done much more to address the
problem of having a lot of bits and pieces of code and data lying around,
though we have provided a framework in which it should be easier to find them
and to apply algorithms and metadata to organize them.
\stephen{I think we need to defend that a bit more.}

%Asynchronous collaborative visual analytics
%(ACVA)~\cite{Chen:2011:SEC}. This paper addresses visualization
%\emph{of} the ACVA process. It will be important when we talk about
%recommendation systems, and navigation of the set of notebooks, etc.

{\bf Caching.}
An important consideration is how and where to introduce caching
in RCloud's distributed computation model. Caching can dramatically
improve performance in a way that is otherwise transparent to
application program semantics \cite{Callahan:2006:VVM, Guo:2010:TPI}.
Though caching is usually implicit, in some environments, such as
VisTrails, programmers may also have some explicit control over cache
management. This may be desirable to ensure the repeatability of
computations that rely on volatile or unreliable data sources.
For example, the stock ticker use case is one for which the data
might temporarily become unavailable, so caching could improve
reliability and consistency of results. Alternatively, in situations
involving relatively expensive computation (for example, analysis of large
text corpora, clustering multivariate time series or deep learning algorithms)
caching may be essential to adequate performance. Currently we would
program this in RCloud by explicitly saving an analysis in a persistent database,
but it seems better to implement this capability in a general purpose associative
cache, instead of application-specific libraries. We envision cache management
being implemented in a new middle layer to be added in the future.

{\bf Security.}
It is essential to provide security in an environment for
collaboration and data publishing. To provide some
protection for RCloud workbooks in an organization's intranet,
RCloud uses an object capability model
\cite{Miller:2006:RCT}
recently added to the Rserve protocol \cite{Urbanek:2003:AFW}
that prevents unauthenticated clients from making
unauthorized calls to the RCloud runtime environment.

Our back-end environment assumes a high degree of trust between users.
Access control for information security is delegated to the host
operating system and web server. In practice, most operating
systems and web servers rely either on coarse permission models,
which tend to be ineffective, or on detailed access control
lists, which tend to be cumbersome. 
Information security in RCloud should be improved, but more
sophisticated approaches (such as information flow analysis,
and query languages that ensure differential privacy) are
active research topics, and many difficult problems remain
\cite{Moore:2011:SAF}. We are hopeful that having a richer
environment for collaboration and information sharing will encourage
new approaches to information security in visual analytics.
\gordon{This sounds like we think we are helping by pushing the
system to the breaking point, is that the idea?}
